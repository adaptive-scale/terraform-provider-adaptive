---
page_title: "adaptive_authorization Resource - terraform-provider-adaptive"
subcategory: ""
description: |-
  Manages an Adaptive authorization, which defines permission policies for accessing resources.
---

# adaptive_authorization (Resource)

The `adaptive_authorization` resource defines permission policies that control what actions users can perform on resources. Authorizations are applied to endpoints to enforce least-privilege access.

## Supported Resource Types

| Type | Description | Permission Format |
|------|-------------|-------------------|
| `postgres` | PostgreSQL database | SQL privileges (SELECT, INSERT, UPDATE, DELETE, etc.) |
| `mysql` | MySQL database | SQL privileges |
| `mongodb` | MongoDB database | MongoDB roles (read, readWrite, dbAdmin, etc.) |
| `kubernetes` | Kubernetes cluster | RBAC verbs and resources |
| `ssh` | SSH server | Shell access controls |

## Example Usage

### PostgreSQL Read-Only Access

```terraform
resource "adaptive_authorization" "postgres_readonly" {
  name          = "postgres-readonly"
  resource_type = "postgres"
  permissions   = "SELECT"
  description   = "Read-only access to PostgreSQL databases"
}
```

### PostgreSQL Read-Write Access

```terraform
resource "adaptive_authorization" "postgres_readwrite" {
  name          = "postgres-readwrite"
  resource_type = "postgres"
  permissions   = "SELECT, INSERT, UPDATE, DELETE"
  description   = "Read-write access to PostgreSQL databases"
}
```

### PostgreSQL Admin Access

```terraform
resource "adaptive_authorization" "postgres_admin" {
  name          = "postgres-admin"
  resource_type = "postgres"
  permissions   = "ALL PRIVILEGES"
  description   = "Full administrative access to PostgreSQL"
}
```

### MySQL Read-Only Access

```terraform
resource "adaptive_authorization" "mysql_readonly" {
  name          = "mysql-readonly"
  resource_type = "mysql"
  permissions   = "SELECT"
  description   = "Read-only access to MySQL databases"
}
```

### MongoDB Read-Only Access

```terraform
resource "adaptive_authorization" "mongodb_readonly" {
  name          = "mongodb-readonly"
  resource_type = "mongodb"
  permissions   = "read"
  description   = "Read-only access to MongoDB collections"
}
```

### MongoDB Read-Write Access

```terraform
resource "adaptive_authorization" "mongodb_readwrite" {
  name          = "mongodb-readwrite"
  resource_type = "mongodb"
  permissions   = "readWrite"
  description   = "Read-write access to MongoDB collections"
}
```

### MongoDB with Custom Roles (Multi-line)

```terraform
resource "adaptive_authorization" "mongodb_custom" {
  name          = "mongodb-custom-roles"
  resource_type = "mongodb"
  permissions   = <<-EOT
    [
      { "role": "read", "db": "analytics" },
      { "role": "readWrite", "db": "application" },
      { "role": "dbAdmin", "db": "application" }
    ]
  EOT
  description   = "Custom MongoDB roles across multiple databases"
}
```

### Kubernetes Namespace Admin

```terraform
resource "adaptive_authorization" "k8s_namespace_admin" {
  name          = "k8s-namespace-admin"
  resource_type = "kubernetes"
  permissions   = <<-EOT
    apiGroups: ["*"]
    resources: ["*"]
    verbs: ["*"]
  EOT
  description   = "Full access within a Kubernetes namespace"
}
```

### Kubernetes Read-Only

```terraform
resource "adaptive_authorization" "k8s_readonly" {
  name          = "k8s-readonly"
  resource_type = "kubernetes"
  permissions   = <<-EOT
    apiGroups: [""]
    resources: ["pods", "services", "configmaps"]
    verbs: ["get", "list", "watch"]
  EOT
  description   = "Read-only access to core Kubernetes resources"
}
```

### Using Authorization with Endpoint

```terraform
# Create authorization
resource "adaptive_authorization" "readonly" {
  name          = "app-readonly"
  resource_type = "postgres"
  permissions   = "SELECT"
  description   = "Read-only access for analytics queries"
}

# Create resource
resource "adaptive_resource" "postgres" {
  name          = "analytics-db"
  type          = "postgres"
  host          = "postgres.example.com"
  port          = "5432"
  username      = "admin"
  password      = var.db_password
  database_name = "analytics"
}

# Create endpoint with authorization
resource "adaptive_endpoint" "analytics_readonly" {
  name          = "analytics-readonly"
  resource      = adaptive_resource.postgres.name
  authorization = adaptive_authorization.readonly.name
  users         = ["analyst@example.com"]
  tags          = ["analytics", "readonly"]
}
```

### Multiple Authorization Levels

```terraform
# Read-only authorization
resource "adaptive_authorization" "readonly" {
  name          = "db-readonly"
  resource_type = "postgres"
  permissions   = "SELECT"
  description   = "Read-only access"
}

# Read-write authorization
resource "adaptive_authorization" "readwrite" {
  name          = "db-readwrite"
  resource_type = "postgres"
  permissions   = "SELECT, INSERT, UPDATE, DELETE"
  description   = "Read-write access"
}

# Admin authorization
resource "adaptive_authorization" "admin" {
  name          = "db-admin"
  resource_type = "postgres"
  permissions   = "ALL PRIVILEGES"
  description   = "Administrative access"
}

# Endpoints with different authorization levels
resource "adaptive_endpoint" "readonly_endpoint" {
  name          = "db-readonly-access"
  resource      = adaptive_resource.postgres.name
  authorization = adaptive_authorization.readonly.name
  users         = ["analyst@example.com"]
}

resource "adaptive_endpoint" "readwrite_endpoint" {
  name          = "db-readwrite-access"
  resource      = adaptive_resource.postgres.name
  authorization = adaptive_authorization.readwrite.name
  users         = ["developer@example.com"]
}

resource "adaptive_endpoint" "admin_endpoint" {
  name          = "db-admin-access"
  resource      = adaptive_resource.postgres.name
  authorization = adaptive_authorization.admin.name
  users         = ["dba@example.com"]
}
```

{{ .SchemaMarkdown | trimspace }}

## Import

Authorizations can be imported using the authorization ID:

```shell
terraform import adaptive_authorization.example authorization-id
```
